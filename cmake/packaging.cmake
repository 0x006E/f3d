# F3D Packaging

set(CPACK_PACKAGE_NAME "${PROJECT_NAME}")
set(CPACK_PACKAGE_VERSION "${PROJECT_VERSION}")
set(CPACK_PACKAGE_VENDOR "Kitware SAS")
set(CPACK_PACKAGE_DESCRIPTION_SUMMARY "${PROJECT_DESCRIPTION}")
set(CPACK_PACKAGE_DESCRIPTION_FILE "${CMAKE_SOURCE_DIR}/README.md")
set(CPACK_RESOURCE_FILE_README "${CMAKE_SOURCE_DIR}/README.md")
#set(CPACK_RESOURCE_FILE_LICENSE "${CMAKE_SOURCE_DIR}/LICENSE")
set(CPACK_PACKAGE_ICON "${CMAKE_SOURCE_DIR}/data/logo64.png")
set(CPACK_PACKAGE_EXECUTABLES f3d f3d)

if(WIN32 AND NOT UNIX)
  set(f3d_url "https://gitlab.kitware.com/f3d/f3d")
  set(CPACK_GENERATOR NSIS64 ZIP)
  set(CPACK_NSIS_MENU_LINKS ${f3d_url} "F3D Web Site")
  set(CPACK_NSIS_MODIFY_PATH ON)
  set(CPACK_NSIS_MUI_ICON "${CMAKE_SOURCE_DIR}/resources/logo.ico")
  set(CPACK_NSIS_MUI_FINISHPAGE_RUN "bin/f3d.exe")
  set(CPACK_NSIS_URL_INFO_ABOUT ${f3d_url})
else()
  if(${CMAKE_SYSTEM_NAME} MATCHES "Linux")
    set(CPACK_GENERATOR TGZ TXZ)
  elseif(${CMAKE_SYSTEM_NAME} MATCHES "Darwin")
    set(CPACK_GENERATOR DragNDrop)
  endif()
endif()

include(CPack)
